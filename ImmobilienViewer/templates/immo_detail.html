{% extends "base.html" %}
{% load static %}

{% block title %}Immobilie{% endblock %}

{% block css %}
    <link
      rel="stylesheet"
      href="{% static 'map.css' %}"/>
     <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
         integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
         crossorigin=""/>
{% endblock %}

{% block javascript_head %}
     <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
         integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
         crossorigin=""></script>
{% endblock %}

{% block content %}
<div class="container my-5">
    <a class="btn btn-primary" href="{% url 'immoviewer:immo-update-immobilie' immobilie.uuid %}" role="button">Edit</a>
    <a class="btn btn-secondary" href="{% url 'immoviewer:immo-upload-attachment' immobilie.uuid %}" role="button">Upload attachments</a>
    {% if attachments|length > 0 %}
    <a class="btn btn-secondary" href="{% url 'immoviewer:immo-list-attachments' immobilie.uuid %}" role="button">List attachments</a>
    {% endif %}

  <div class="p-5 text-left bg-body-tertiary rounded-3">
    <h1 class="text-body-emphasis text-center">{{immobilie.title}}</h1>
    <p class="col-lg-8 mx-auto fs-5 text-muted">{{immobilie.description}}</p>
    <ul>
        <li><small class="text-muted">Type: {{immobilie.type}}</small></li>
        <li><small class="text-muted">Price: {{immobilie.price}}</small></li>
        <li><small class="text-muted">Provider: {{immobilie.provider}}</small></li>
        <li><small class="text-muted">Location: {{immobilie.location}}</small></li>
    </ul>
        <p class="text-body-emphasis text-left">Attachments</p>
      <ul>
   {% for attachment in attachments %}
            <li><a href="{{ attachment.attachment.url }}">{{ attachment.name }}</a></li>
    {% endfor %}
      </ul>
  </div>
</div>
{% if immobilie.lat_lng|length > 0 %}
    <div class="container-lg my-5 bg-body-tertiary rounded-3" id="map">
            <script>
                var mapLatitudeLongitude = {{immobilie.lat_lng}};
                var mapAdress = "{{immobilie.location}}";
            </script>
            <script defer src="{% static 'map_marker.js' %}"></script>
    </div>

{% endif %}

{% endblock %}
